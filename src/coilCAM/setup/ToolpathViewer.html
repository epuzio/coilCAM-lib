<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
    <!-- REDIRECT TO simple-editor-index.html if URL param = simple -->
    <!-- simple editor is used to embed in hugo documentation -->
    <!-- Example URL params: index.html/?interface=simple&folder=tutorial-functions&example=functions_union-->
	<script type="importmap">
		{
		  "imports": {
			"three": "https://cdn.jsdelivr.net/npm/three@latest/build/three.module.js",
			"three/addons/": "https://cdn.jsdelivr.net/npm/three@latest/examples/jsm/"
		  }
		}
	  </script>
  </head>


<!-- LIBRARIES / IMPORTS -->
 
<!-- CoilCAM library -->
<script src="https://unpkg.com/coilcam-js@1.0.39/dist/module.js"></script>

<!-- Resizing windows (Split-js)-->
<script src="https://unpkg.com/split.js/dist/split.min.js"></script>

<!-- UI + updatePath functionality (for online editor) -->
<script type="module" src="ToolpathViewer.js"></script>

<script> //test CoilCAM library
  // Wait for the document to load
  console.log('TEST CC LIBRARY IN CONSOLE ON LOAD');
  document.addEventListener("DOMContentLoaded", function() {
    console.log("test start");
    console.log(window)
    var linear2DOperator = linear2D(0.4, 1, 0.3, 0, 30, 0, "");

    var toolpath = toolpathUnitGenerator([0, 0, 0], 30, 3, 30, 50, [], [], [], linear2DOperator, [], []);
    // updatePath(spiralize(toolpath, 3));

    console.log("test done");
  });
</script>



<!-- CodeMirror -->
<!-- <link rel="stylesheet" href="style-interface.css">
<script src="codemirror-5.65.13/lib/codemirror.js"></script>
<link rel="stylesheet" href="codemirror-5.65.13/lib/codemirror.css">
<script src="codemirror-5.65.13/mode/javascript/javascript.js"></script>
<script src = "codemirror-5.65.13/addon/hint/show-hint.js"></script>
<script src = "codemirror-5.65.13/addon/hint/javascript-hint.js"></script>  -->
<!-- <script src = "codemirror-5.65.13/addon/comment/comment.js"></script> -->
<!-- <link rel="stylesheet" href = "codemirror-5.65.13/addon/hint/show-hint.css"> -->

<!-- WebGL -->
<script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
<script src="https://webglfundamentals.org/webgl/resources/webgl-lessons-ui.js"></script>
<script src="https://cdn.jsdelivr.net/npm/polyline-normals/dist/polyline-normals.min.js"></script>

<!-- <script type="module" src='https://unpkg.com/three@0.151.3/build/three.module.js'></script> -->

<body>
  <div class = "page" id="layout">
    <div class = "CC-header">
      <h2>coilCAM-js</h2>
      <div class = "CC-header-buttons">
        <button type="button" id="b_run">run</button> 
        <button type="button" id="b_save">save</button> 
        <input type="file" id="file_input" hidden/>
        <button type="button" id="b_upload">upload</button> 
        <div class="dropdown">
          <button type="button">examples</button>
          <div id="example-dropdown" class="dropdown-content">
            <a id="example-vase">demo vase</a>
            <a id="example-cup">demo cup</a>
            <a id="example-plate">demo plate</a>
          </div>
        </div>
        <button type="button" id="b_docs">documentation</button> 
      </div>
      <div class = "CC-header-buttons">
        <div class="dropdown">
          <button type="printer-button" id="b_printer_dims">printer dimensions</button> 
          <div id="example-dropdown" class="dropdown-content">
            <a id="baby_pb">baby potterbot</a>
            <a id="super_pb">super potterbot</a>
          </div>
        </div>
      </div>
    </div>

    <div class="split">
      <div class="cell split-files">
        <input type="file" id="upload_data" hidden/>
        <button type="upload-button" id="b_upload_files">upload files</button> 
        <div class="files-group" id="dropbox">
        </div>
      </div>
      <div class="cell split-editors">
        <div class="cell split-editor">
          <textarea id = "editor"></textarea>
        </div>
        <div class="cell split-console">
            <textarea id = "console"></textarea>
        </div> 
      </div>
      <div class="split-window">
        <canvas id="canvas">
			<iframe id="viewerFrame"></iframe>
		</canvas>
      </div>
    </div>
  </div>


  <!-- Add Three js viewer to canvas? -->
  <script type="module" src="ToolpathViewer.js">
    // import { ToolpathViewer } from 'https://unpkg.com/coilcam@latest/dist/module.js';

    // console.log("window", window);
    document.addEventListener('DOMContentLoaded', () => {
      // Get a reference to the container element
      const cc = document.getElementById('canvas');
	    console.log("C");
      console.log("contain", cc);
      const path = [];
      const referencePath = [];
      const bedDimensions = [28, 100, 30.5];
	    console.log("T");
      const toolpathViewer = new ToolpathViewer(cc, path, referencePath, bedDimensions);
	    console.log("t");
    });
  </script>

  <script>
    Split(['.split-files', '.split-editors', '.split-window'], {
      sizes: [10, 40, 50],
      maxSize: [Infinity, Infinity],
      minSize: 10,
      direction: 'horizontal',
      cursor: 'row-resize'
    });
    Split(['.split-editor', '.split-console'], {
      sizes: [70, 30],
      direction: 'vertical',
      cursor: 'col-resize'
    }
    );
  </script>
</body>
</html>
